<div class=".container m-2">
	<div>

		<!-- Action buttons -->
		<div class="action-buttons">
			<button class="btn btn-secondary btnRight" (click)="fetchStatus()" download>Refresh</button>
		</div>
			
		<ul class="nav nav-tabs">
		  <li class="nav-item">
		    <span class="nav-link statsChartTab" (click)="switchTab('downloads')">Downloads</span>
		  </li>
		   <li class="nav-item">
		    <span class="nav-link statsChartTab" (click)="switchTab('email')">Email Requests</span>
		  </li>
		   <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('listings')">Listings</span>
		  </li>
		  <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('availability')">Availability</span>
		  </li>
		  <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('newCandidateStats')">New Candidate Stats</span>
		  </li>
		</ul>
				
		<!-- Downloads -->
		<div *ngIf="showStatsDownloads">
					
			<div class="chart-wrapper">
				<h3>Daily downloads</h3>
   	 			<canvas baseChart 
        				[datasets]="lineChartData" 
        				[labels]="lineChartLabels" 
        				[options]="lineChartOptions"
        				[colors]="lineChartColors" 
        				[legend]="lineChartLegend" 
        				[chartType]="lineChartType" 
       			 		[plugins]="lineChartPlugins">
   				 </canvas>
			</div>
						
			<div class="chart-wrapper">
				<h3>Recruiter downloads: {{chartDownloadsTotal}}</h3>
				<button (click)="switchChartData('week')">This week</button>
				<button (click)="switchChartData('day')">Today</button>
    			<canvas baseChart 
        				[datasets]="recruiterDownloadsChartData" 
        				[labels]="recruiterDownloadsChartLabels" 
        				[options]="recruiterDownloadsChartOptions"
        				[colors]="recruiterDownloadsChartColors" 
        				[legend]="recruiterDownloadsChartLegend" 
        				[chartType]="recruiterDownloadsChartType" 
        				[plugins]="recruiterDownloadsChartPlugins">
    			</canvas>
			</div>
		</div>
		
		<!-- Email Requests -->
		<div *ngIf="showStatsEmailRequests">
					
			<div class="chart-wrapper">
				<h3>Daily Requests</h3>
   	 			<canvas baseChart 
        				[datasets]="emailRequestChartData" 
        				[labels]="emailRequestChartLabels" 
        				[options]="emailRequestChartOptions"
        				[colors]="emailRequestChartColors" 
        				[legend]="emailRequestChartLegend" 
        				[chartType]="emailRequestChartType" 
       			 		[plugins]="emailRequestChartPlugins">
   				 </canvas>
			</div>
						
			<div class="chart-wrapper">
				<h3>Recruiter Email Requests: {{chartEmailRequestsTotal}}</h3>
				<button (click)="switchChartDataEmailRequests('week')">This week</button>
				<button (click)="switchChartDataEmailRequests('day')">Today</button>
    			<canvas baseChart 
        				[datasets]="emailRequestRecruiterChartData" 
        				[labels]="emailRequestRecruiterChartLabels" 
        				[options]="emailRequestRecruiterChartOptions"
        				[colors]="emailRequestRecruiterChartColors" 
        				[legend]="emailRequestRecruiterChartLegend" 
        				[chartType]="emailRequestRecruiterChartType" 
        				[plugins]="emailRequestRecruiterChartPlugins">
    			</canvas>
			</div>
		</div>
		
		<!-- Listings -->
		<div *ngIf="showStatsListings">
			
			<div class="chart-wrapper">
				<h5>Totals:</h5>
				<table>
					<tr>
						<td>Listings viewed today</td>
						<td>{{listingViewsToday}}</td>
					</tr>
					<tr>
						<td>Listings viewed this week</td>
						<td>{{listingViewsThisWeek}}</td>
					</tr>
				</table>
			</div>
			<div class="chart-wrapper">
				<h5>Available by Function</h5>
 						<canvas baseChart 
     						[datasets]="listingChartData" 
     						[labels]="listingChartLabels" 
     						[options]="listingChartOptions"
     						[colors]="listingChartColors" 
     						[legend]="listingChartLegend" 
     						[chartType]="listingChartType" 
     						[plugins]="listingChartPlugins">
  					</canvas>
			</div>			
		</div>
			
		<!-- Availability -->
		<div *ngIf="showStatsAvailability">
			<div class="chart-wrapper">
				<h5>Totals:</h5>
				<table>
					<tr>
						<td>Active Users</td>
						<td>{{totalNumberActiveCandidates}}</td>
					</tr>
				</table>
			</div>
			<div class="chart-wrapper">
				<h5>Available by Function</h5>
 						<canvas baseChart 
     						[datasets]="functionChartData" 
     						[labels]="functionChartLabels" 
     						[options]="functionChartOptions"
     						[colors]="functionChartColors" 
     						[legend]="functionChartLegend" 
     						[chartType]="functionChartType" 
     						[plugins]="functionChartPlugins">
  					</canvas>
			</div>	
		</div>	
		
		<!-- New Candidate Stats -->
		<div *ngIf="showNewCandidates" class="stats-table">
			<div class="action-buttons">
				<button class="btn btn-secondary btnRight" (click)="loadNewCandidates()" 		download>Show New Candidates</button>
				<button class="btn btn-secondary btnRight" (click)="loadNewCandidateStats()" 	download>Show New Candidate Stats</button>
			</div>	
			<div *ngIf="showNewCandidatesDiv">
				<p>
					New Candidates available
				</p>
				<br/>
				<ul *ngFor="let candidate of newCandidates">
					<li>{{countryToCode(candidate.country)}} - EXP: {{candidate.yearsExperience}} Years - {{candidate.functionDesc}}</li>	
				</ul>
				<br/>
				<p>
					https://www.arenella-ict.com
				</p>
			</div>
			<div *ngIf="showNewCandidateStatsDiv" class="stats-table">
				<p>The following new candidates have been added:</p>
				<table>
				<tr *ngFor="let candidateStat of newCandidateStats">
					<td class="new-candidate-table-td">{{candidateStat.count}}</td>  <td class="new-candidate-table-td">x</td> <td class="new-candidate-table-td">{{candidateStat.functionType}}</td>
				</tr>
				</table>
				
			</div>
		</div>	  
	</div>
</div>