<div class=".container m-2">
	
	<div>

		<!-- Action buttons -->
		<div class="action-buttons">
			<button class="btn btn-secondary btnRight" (click)="refreshData()" download>Refresh</button>
		</div>
			
		<ul class="nav nav-tabs">
		  <li class="nav-item">
		    <span class="nav-link statsChartTab" (click)="switchTab('logins')">Logins</span>
		  </li>
		  <li class="nav-item">
		    <span class="nav-link statsChartTab" (click)="switchTab('downloads')">Downloads</span>
		  </li>
		   <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('listings')">Listings</span>
		  </li>
		  <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('marketplace')">Marketplace</span>
		  </li>
		  <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('availability')">Availability</span>
		  </li>
		  <li class="nav-item statsChartTab">
		    <span class="nav-link" (click)="switchTab('newCandidateStats')">New Candidate Stats</span>
		  </li>
		</ul>
		
		<!-- Logins -->
		<div *ngIf="showStatsLogins">
					
			<div class="chart-wrapper-page">		
				<div class="chart-wrapper">
					<h3>Logins</h3>
					<button (click)="switchLoginStats('year')">Year</button>
					<button (click)="switchLoginStats('3months')">3 Months</button>
					<button (click)="switchLoginStats('week')">Week</button>
	   	 			<canvas baseChart 
	        				[datasets]="loginChartData" 
	        				[labels]="loginChartLabels" 
	        				[options]="loginChartOptions"
	        				[colors]="loginChartColors" 
	        				[legend]="loginChartLegend" 
	        				[chartType]="loginChartType" 
	       			 		[plugins]="loginChartPlugins">
	   				 </canvas>
				</div>
							
				<div class="chart-wrapper" *ngIf="loginChartView == 'chart'">
					<h3>logins: Recruiters: {{loginCountRecruiter}} Candidates: {{loginCountCandidate}}</h3>
					<button (click)="switchUserStatsView('table')" class="toggle-view">Table</button>
					<button (click)="switchUserStats('week')">This Week</button>
					<button (click)="switchUserStats('today')">Today</button>
					<canvas baseChart 
	        				[datasets]="recruiterLoginsChartData" 
	        				[labels]="recruiterLoginsChartLabels" 
	        				[options]="recruiterLoginsChartOptions"
	        				[colors]="recruiterLoginsChartColors" 
	        				[legend]="recruiterLoginsChartLegend" 
	        				[chartType]="recruiterLoginsChartType" 
	        				[plugins]="recruiterLoginsChartPlugins">
	    			</canvas>
				</div>
				
				<div class="chart-wrapper" *ngIf="loginChartView == 'table'">
					<h3>logins: Recruiters: {{loginCountRecruiter}} Candidates: {{loginCountCandidate}}</h3>
					<button (click)="switchUserStatsView('chart')"  class="toggle-view">Chart</button>
					<button (click)="switchUserStats('week')">This Week</button>
					<button (click)="switchUserStats('today')">Today</button>
					<div class="login-table-view">
						<table style="width:100%">
							<thead>
								<tr>
									<th>User</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let user of recruiterLoginsChartLabels" (click)="switchUserStatsView('table', user)">
									<td>{{user}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="chart-wrapper" *ngIf="loginChartView == 'table'">
					<h3>Searches</h3>
					<div class="recruiter-stats">
					<table style="width:100%">
							<thead>
								<tr>
									<th>Country</th>
									<th>Function</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let search of recruiterStats.uniqueSearches">
									<td *ngIf="search.country === 'NETHERLANDS'"  			class="flag-icon flag-icon-nl suggestion-flag-country listing-country"></td>
									<td *ngIf="search.country === 'BELGIUM'"				class="flag-icon flag-icon-be suggestion-flag-country listing-country"></td>
									<td *ngIf="search.country === 'UK'"						class="flag-icon flag-icon-gb suggestion-flag-country listing-country"></td>
									<td *ngIf="search.country === 'REPUBLIC_OF_IRELAND'"	class="flag-icon flag-icon-ie suggestion-flag-country listing-country"></td>
									<td>{{getFunctionLabel(search.function)}}</td>
								</tr>
							</tbody>
						</table>
						
					</div>
				</div>
			</div>
		</div>
				
		<!-- Downloads -->
		<div *ngIf="showStatsDownloads">
					
			<div class="chart-wrapper-page">		
				<div class="chart-wrapper">
					<h3>Daily downloads</h3>
	   	 			<canvas baseChart 
	        				[datasets]="lineChartData" 
	        				[labels]="lineChartLabels" 
	        				[options]="lineChartOptions"
	        				[colors]="lineChartColors" 
	        				[legend]="lineChartLegend" 
	        				[chartType]="lineChartType" 
	       			 		[plugins]="lineChartPlugins">
	   				 </canvas>
				</div>
							
				<div class="chart-wrapper">
					<h3>Recruiter downloads: {{chartDownloadsTotal}}</h3>
					<button (click)="switchChartData('week')">This week</button>
					<button (click)="switchChartData('day')">Today</button>
	    			<canvas baseChart 
	        				[datasets]="recruiterDownloadsChartData" 
	        				[labels]="recruiterDownloadsChartLabels" 
	        				[options]="recruiterDownloadsChartOptions"
	        				[colors]="recruiterDownloadsChartColors" 
	        				[legend]="recruiterDownloadsChartLegend" 
	        				[chartType]="recruiterDownloadsChartType" 
	        				[plugins]="recruiterDownloadsChartPlugins">
	    			</canvas>
				</div>
			</div>
		</div>
		
		<!-- Listings -->
		<div *ngIf="showStatsListings">
			
			<div class="chart-wrapper">
				<h5>Totals:</h5>
				<table>
					<tr>
						<td>Listings viewed today</td>
						<td>{{listingViewsToday}}</td>
					</tr>
					<tr>
						<td>Listings viewed this week</td>
						<td>{{listingViewsThisWeek}}</td>
					</tr>
				</table>
			</div>
			<div class="chart-wrapper">
				<h5>Available by Function</h5>
 					<canvas baseChart 
     					[datasets]="listingChartData" 
     					[labels]="listingChartLabels" 
     					[options]="listingChartOptions"
     					[colors]="listingChartColors" 
     					[legend]="listingChartLegend" 
     					[chartType]="listingChartType" 
     					[plugins]="listingChartPlugins">
  					</canvas>
			</div>			
		</div>
		
		<!-- Marketplace Views -->
		<div *ngIf="showMarketplaceStats">		
			<div class="chart-wrapper">			
				<h3>Requested Candidate Views: {{requestedCandidateViewsTotal}}</h3>
				<button (click)="switchMarketplaceRequestedCandidatesChartData('week')">This week</button>
				<button (click)="switchMarketplaceRequestedCandidatesChartData('day')">Today</button>
    			<canvas baseChart 
        				[datasets]="marketPlaceEventsChartDataRequested" 
        				[labels]="marketPlaceEventsChartLabelsRequested" 
        				[options]="marketPlaceEventsChartOptions"
        				[colors]="marketPlaceEventsChartColors" 
        				[legend]="marketPlaceEventsChartLegend" 
        				[chartType]="marketPlaceEventsChartType" 
        				[plugins]="marketPlaceEventsChartPlugins">
    			</canvas>
			</div>			
		</div>
			
		<!-- Availability -->
		<div *ngIf="showStatsAvailability">
			<div class="chart-wrapper">
				<h5>Totals:</h5>
				<table>
					<tr>
						<td>Active Users</td>
						<td>{{totalNumberActiveCandidates}}</td>
					</tr>
				</table>
			</div>
			<div class="chart-wrapper">
				<h5>Available by Function</h5>
 						<canvas baseChart 
     						[datasets]="functionChartData" 
     						[labels]="functionChartLabels" 
     						[options]="functionChartOptions"
     						[colors]="functionChartColors" 
     						[legend]="functionChartLegend" 
     						[chartType]="functionChartType" 
     						[plugins]="functionChartPlugins">
  					</canvas>
			</div>	
		</div>	
		
		<!-- New Candidate Stats -->
		<div *ngIf="showNewCandidates" class="stats-table">
			<div class="action-buttons">
				<button class="btn btn-secondary btnRight stat-btn" (click)="loadNewCandidates()" 		download>Show New Candidates</button>
				<button class="btn btn-secondary btnRight stat-btn" (click)="loadNewCandidateStats()" 	download>Show New Candidate Stats</button>
			</div>	
			<div *ngIf="showNewCandidatesDiv">
				<p>
					New Candidates available
				</p>
				<br/>
				<ul *ngFor="let candidate of newCandidates">
					<li>{{countryToCode(candidate.country)}} - EXP: {{candidate.yearsExperience}} Years - {{candidate.functionDesc}}</li>	
				</ul>
				<br/>
				<p>
					https://www.arenella-ict.com
				</p>
				<p>
					#available #looking #lookingforwork #itcandidates #ictkandidaten #candidate #kandidaat
					#itjobboard #ictojobboard #beschikbaar #it #ict #opentowork #seeking 
				</p>
			</div>
			<div *ngIf="showNewCandidateStatsDiv" class="stats-table">
				<p>The following new candidates have been added:</p>
				<table>
				<tr *ngFor="let candidateStat of newCandidateStats">
					<td class="new-candidate-table-td">{{candidateStat.count}}</td>  <td class="new-candidate-table-td">x</td> <td class="new-candidate-table-td">{{candidateStat.functionType}}</td>
				</tr>
				</table>
				
			</div>
		</div>	  
	</div>
</div>