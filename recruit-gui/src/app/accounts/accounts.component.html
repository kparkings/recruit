<div class=".container m-2" >

	<ul class="nav nav-tabs">
	  <li class="nav-item">
	    <span class="nav-link tabNav" (click)="switchTab('recruiters')">Recruiters</span>
	  </li>
	  <li class="nav-item tabNav">
	    <span class="nav-link" (click)="switchTab('candidates')">Candidates</span>
	  </li>
	  <li class="nav-item tabNav">
	    <span class="nav-link" (click)="switchTab('availabilityChecks')">Availability Checks</span>
	  </li>
	  <li class="nav-item tabNav">
	    <span class="nav-link" (click)="switchTab('flaggedAsUnavailable')">Flagged as unavailable</span>
	  </li>
	   <li class="nav-item tabNav">
	    <span class="nav-link" (click)="switchTab('subscriptionActions')">Subscription actions</span>
	  </li>
	</ul>
	
	<!-- Recruiters-->
	<div *ngIf="showRecruitersTab">
		<table>
			<thead>
				<tr>
					<th>Subscription Type</th>
					<th>Count</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="recruiter-active-subscription">Active Paid Subscription</td>
					<td>{{activePaidSubscription.length}}</td>
					<td><button class="btn btn-secondary btn-action" (click)="toggleShowActivePaidSubscription()">Toggle</button></td>
				</tr>
				<tr>
					<td>Expired Subscription</td>
					<td class="recruiter-expired-subscription">{{expiredSubscriptionRecruiters.length}}</td>
					<td><button class="btn btn-secondary btn-action" (click)="toggleShowExpiredSubscriptionRecruiters()">Toggle</button></td>
				</tr>
				<tr>
					<td>Trial Subscription</td>
					<td class="recruiter-trial-subscription">{{trialPeriodRecruiters.length}}</td>
					<td><button class="btn btn-secondary btn-action" (click)="toggleShowTrialPeriodRecruiters()">Toggle</button></td>
				</tr>
				
				<tr>
					<td class="recruiter-firstgen">FirstGen Subscription</td>
					<td>{{firstGenActiveSubscription.length}}</td>
					<td><button class="btn btn-secondary btn-action" (click)="toggleShowFirstGenActiveSubscription()">Toggle</button></td>
				</tr>
				<tr>
					<td>Total  / Total active</td>
					<td>{{recruiters.length}} / <span>{{getTotalActiveRecruiters()}}</span></td>
				</tr>
			</tbody>
		</table>
	
		<div >
	    	<table class="table candidate-table">
				<thead>
	      			<tr>
	      				<!-- Table Headers -->
	      				<th class="bg-tab-hdr">User Id</th>
	      				<th class="bg-tab-hdr">Firstname</th>
	            	    <th class="bg-tab-hdr">Surname</th>
	            	    <th class="bg-tab-hdr">Email</th>
	                	<th class="bg-tab-hdr">Company</th>
	                	<th class="bg-tab-hdr">Actions</th>
	                	<th class="bt-tab-hdr">Active Subscription</th>
	      			</tr>
	      	</thead>
	      	<tbody>
	      			<!-- Table row -->
	      			
	      			
	      			<tr *ngFor="let recruiter of activePaidSubscription" class="recruiter-active-subscription">
	      				<td *ngIf="showActivePaidSubscription" class="candidate-tab-col"><span class="candidate-id-prefix"></span>{{recruiter.userId}}</td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col mini-col"> {{recruiter.firstName}}</td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col medicol">{{recruiter.surname}}</td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col medicol">{{recruiter.email}}</td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col medicol">{{recruiter.companyName}}</td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col medicol"></td>
	            	    <td *ngIf="showActivePaidSubscription" class="candidate-tab-col medicol">{{recruiter.hasActiveSubscription}}</td>
	      			</tr>
	      			<tr *ngFor="let recruiter of expiredSubscriptionRecruiters" class="recruiter-expired-subscription">
	      				<td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col"><span class="candidate-id-prefix"></span>{{recruiter.userId}}</td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col mini-col"> {{recruiter.firstName}}</td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col medicol">{{recruiter.surname}}</td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col medicol">{{recruiter.email}}</td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col medicol">{{recruiter.companyName}}</td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col medicol"></td>
	            	    <td *ngIf="showExpiredSubscriptionRecruiters" class="candidate-tab-col medicol">{{recruiter.hasActiveSubscription}}</td>
	      			</tr>	
	      			<tr *ngFor="let recruiter of trialPeriodRecruiters" class="recruiter-trial-subscription">
	      				<td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col"><span class="candidate-id-prefix"></span>{{recruiter.userId}}</td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col mini-col"> {{recruiter.firstName}}</td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col medicol">{{recruiter.surname}}</td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col medicol">{{recruiter.email}}</td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col medicol">{{recruiter.companyName}}</td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col medicol"></td>
	            	    <td *ngIf="showTrialPeriodRecruiters" class="candidate-tab-col medicol">{{recruiter.hasActiveSubscription}}</td>
	      			</tr>	
	      			<tr *ngFor="let recruiter of firstGenActiveSubscription" class="recruiter-firstgen" >
	      				<td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col"><span class="candidate-id-prefix"></span>{{recruiter.userId}}</td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col mini-col"> {{recruiter.firstName}}</td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col medicol">{{recruiter.surname}}</td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col medicol">{{recruiter.email}}</td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col medicol">{{recruiter.companyName}}</td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col medicol"></td>
	            	    <td *ngIf="showFirstGenActiveSubscription" class="candidate-tab-col medicol">{{recruiter.hasActiveSubscription}}</td>
	      			</tr>	
	      		</tbody>
			</table>	
		</div>
	</div>
	
	<!--  -->
	<div *ngIf="showAvailabilityCheckTab">
		<table class="table candidate-table">
			<thead>
	      		<tr>
	      			<th class="bg-tab-hdr">CandidateId</th>
	      			<th class="bg-tab-hdr">Candidate Name</th>
	      			<th class="bg-tab-hdr">Location</th>
	      			<th class="bg-tab-hdr">Function</th>
	                <th class="bg-tab-hdr">Actions</th>
	             </tr>
	      	</thead>
	      	<tbody>
	      		<tr *ngFor="let candidate of candidatesToCheckForAvailability">
	      			<td>
	      				{{candidate.candidateId}}
	      			</td>
	      			<td>
	      				{{candidate.firstname}} {{candidate.surname}}
	      			</td>
	      			<td>
	      				{{candidate.country}} {{candidate.city}}
	      			</td>
	      			<td>
	      				{{candidate.roleSought}}
	      			</td>
	      			<td>
	      				<button	class="control-spacing btn btn-secondary btn-action" (click)="markCandidateAsAvailable(candidate.candidateId)">Available</button>
	      				<button	class="control-spacing btn btn-secondary btn-action" (click)="disableNoLongerAvailableFlaggedAsUnavailableCandidate(candidate.candidateId)">Disable</button>
	      			</td>
	      		</tr>
	      	</tbody>
		</table>
	</div>
		
	<!-- Candidates-->
	<div *ngIf="showCandidatesTab">
		<form [formGroup]="candidateFormGroup">
			<h3>Candidates</h3>
			<span>
				<label 	class="control-spacing">Firstname</label>
				<input 	class="control-spacing" type="text" formControlName="firstname"/>
				<label 	class="control-spacing">Surname</label>
				<input 	class="control-spacing" type="text" formControlName="surname"/>
				<label 	class="control-spacing">email</label>
				<input 	class="control-spacing" type="text" formControlName="email"/>
				<button	class="control-spacing btn btn-secondary btn-action" (click)="fetchCandidates()">Filter</button>
			</span>
			
		</form>
	
		<!-- Candidates table -->  
		<div style="margin-top: 5px;">
      
			<table class="table candidate-table">
				<thead>
	      			<tr>
	      				<!-- Table Headers -->
	      				<th class="bg-tab-hdr">CandidateId</th>
	      				<th class="bg-tab-hdr">Firstname</th>
	                	<th class="bg-tab-hdr">Surname</th>
	                	<th class="bg-tab-hdr">Email</th>
	                	<th class="bg-tab-hdr">Actions</th>
	              </tr>
	      		</thead>
	      		<tbody>
	      			<!-- Table row -->
	      			<tr *ngFor="let candidate of candidates">
	      				<td class="candidate-tab-col"><span class="candidate-id-prefix">C</span>{{candidate.candidateId}}</td>
	            	    <td class="candidate-tab-col mini-col"> {{candidate.firstname}}</td>
	            	    <td class="candidate-tab-col medicol">{{candidate.surname}}</td>
	            	    <td class="candidate-tab-col medicol">{{candidate.email}}</td>
	            	    <td class="candidate-tab-col medicol">
	            	    	<div [ngSwitch]="candidate.available">
	                			<div  *ngSwitchCase="true">
	                				<button	class="control-spacing btn btn-secondary btn-action" (click)="disableCandidate(candidate.candidateId)">Disable</button>
	                			</div>
	                			<div  *ngSwitchCase="false">
	                				<button	class="control-spacing btn btn-secondary btn-action" (click)="disableCandidate(candidate.candidateId)">Enable</button>
	                			</div>
	                		</div>
	                	</td>
	      			</tr>	
	      		</tbody>
			</table>
		</div>
		
	</div>
	
	<!-- Flagged as Unavailable-->
	<div *ngIf="showFlaggedAsUnavailableTab">
		<form [formGroup]="candidateFormGroup">
			<h3>Flagged as Unavailable</h3>
			<table class="table candidate-table">
				<thead>
	      			<tr>
		      			<!-- Table Headers -->
		      			<th class="bg-tab-hdr">CandidateId</th>
		      			<th class="bg-tab-hdr">Firstname</th>
		                <th class="bg-tab-hdr">Surname</th>
		                <th class="bg-tab-hdr">Email</th>
		                <th class="bg-tab-hdr">Actions</th>
		        	</tr>
	      		</thead>
	      		<tbody>
	      			<!-- Table row -->
	      			<tr *ngFor="let candidate of candidates">
	      				<td class="candidate-tab-col"><span class="candidate-id-prefix">C</span>{{candidate.candidateId}}</td>
	                	<td class="candidate-tab-col mini-col"> {{candidate.firstname}}</td>
	                	<td class="candidate-tab-col medicol">{{candidate.surname}}</td>
	                	<td class="candidate-tab-col medicol">{{candidate.email}}</td>
	                	<td class="candidate-tab-col medicol">
	                		<button	class="control-spacing btn btn-secondary btn-action" (click)="disableFlaggedAsUnavailableCandidate(candidate.candidateId)">Disable</button>
	                		<button	class="control-spacing btn btn-secondary btn-action" (click)="removeFlaggedAsUnavailableFlag(candidate.candidateId)">Remove Flag</button>
	                	</td>
	      			</tr>	
	      		</tbody>
			</table>
		</form>
	</div>
	
	<!-- Subscriptions requiring actions -->
	<div *ngIf="showSubscriptionActionsTab">
		<div class="sub-title">
			<h3>Subscription actions required</h3>
		</div>
		
		<table class="table candidate-table">
			<thead>
				<tr>
					<th>Recruiter Id</th>
					<th>First Name</th>
					<th>Surname</th>
					<th>Email</th>
					<th>Language</th>
					<th>Type</th>
					<th>Status</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let subscriptionAction of recruitersWithSubscriptionActions">
					<td>{{subscriptionAction.userId}}</td>
					<td>{{subscriptionAction.firstName}}</td>
					<td>{{subscriptionAction.surname}}</td>
					<td>{{subscriptionAction.email}}</td>
					<td>{{subscriptionAction.language}}</td>
					<td>{{subscriptionAction.type}}</td>
					<td>{{subscriptionAction.status}}</td>
					<td>
						<button class="btn btn-secondary btn-action" *ngFor="let action of subscriptionAction.actions" (click)="performAction(subscriptionAction, action)">{{frmtSubscriptionAction(action)}}</button>
					</td>
				</tr>
			</tbody>
		</table>
	<div>
	
	<ng-template #recruiterLoginDetails let-modal>
	
		<!--  Options -->
		<div class="modal-header">
			<h4 class="modal-title">Actions</h4>
			<div class="filter-close-box" (click)="closeModal()">X</div>
		</div>
		<div class="modal-body">
			<!--  Specific Filters -->
			<div>
				<table>
					<tr>
						<td class="feedback-label">UserId</td>
						<td>{{activateRecruiterUserId}}</td>
					</tr>
					<tr>
						<td class="feedback-label">Password</td>
						<td>{{activateRecruiterUserPassword}}</td>
					</tr>
				</table>
			</div>
		</div> 
	</ng-template>
	
	
</div>