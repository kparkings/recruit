<div class="page">

	<!-- Nav options -->
	<div class="nav-tabs-bar" ></div>
		
	<div class="page-body">	
		
		<!-- Action buttons -->
		<div *ngIf="currentView === 'suggestion-results'" class="action-buttons">
		    <button class="btn btn-secondary arenella-btn" (click)="showSavedCandidates()" download>{{'arenella-suggestions-btn-my-candidates' | translate}}</button>
	        <button class="btn btn-secondary arenella-btn" (click)="openPublicityDialog()" *ngIf="currentUserAuth.isAdmin()" download>{{'arenella-suggestions-btn-copy' | translate}}</button>
	        <button class="btn btn-secondary arenella-btn" (click)="showFilterByJobSpecDialog(specUploadBox)" download>{{'arenella-suggestions-btn-filter-by-spec' | translate}}</button>
	        <button class="btn btn-secondary arenella-btn" (click)="doReset()">{{'arenella-suggestions-btn-reset' | translate}}</button>
	     </div>
		 
		 <div class="arenella-whole-width-page"  *ngIf="currentView != 'saved-candidates' && currentView != 'suggested-canidate-overview'">
		 
		 </div>
		
		 <div class="{{searchBarCss}}" *ngIf="currentView != 'saved-candidates'">
		 	<app-searchbar #searchbar (newSuggestionResults)="handleNewSearchRequest($event)" ></app-searchbar>
		 </div>
		 
		<div *ngIf="currentView === 'saved-candidates'">
			<app-saved-candidates [savedCandidates]="savedCandidates" (switchViewEvent)="showSuggestionsResults()" [infoItemConfig]="infoItemConfig" [skillFilters]="skillFilters"></app-saved-candidates>
		</div>
	

		<!-- Suggestion Results -->
		<div *ngIf="currentView === 'suggestion-results'">
		
			<div class="suggestion-result-icons">
			
				<div class="suggestion-icon {{suggestionMobileClass}} {{getUnvailableCssClass(suggestion)}}" *ngFor="let suggestion of this.suggestions" (click)="showSuggestedCandidateOverview(suggestion)">
					<div>
						
						<div *ngIf="!isSavedCandidate(suggestion)" class="suggestion-icon-header">	
						<span class=" flag-icon {{infoPaneUtil.getFlagClassFromCountry(suggestion.country)}} suggestion-results-flag-country"></span> <span class="candidate-id"> C{{suggestion.candidateId}}</span>
						</div>
						<div *ngIf="isSavedCandidate(suggestion)" class="suggestion-icon-header suggestion-icon-header-saved">	
						<span class=" flag-icon {{infoPaneUtil.getFlagClassFromCountry(suggestion.country)}} suggestion-results-flag-country"></span> <span class="candidate-id"> C{{suggestion.candidateId}}</span>
						</div>
					</div>
					<div title="Accuracy Skills" class="suggestion-perception-result-{{suggestion.accuracySkills}}"></div>
					<div title="Accuracy Languages" class="suggestion-perception-result-{{suggestion.accuracyLanguages}}"></div>
					<div class="suggestion-icon-body">
						<div>
							{{suggestion.firstname}} {{suggestion.surname}}
						</div>
						<div>
							{{suggestion.roleSought}}
						</div>
					</div>
				</div>
				
			</div>
			<div class="suggestion-result-footer">&nbsp;</div>
		</div>

		<!-- Suggestion Profile -->
		<div *ngIf="currentView === 'suggested-canidate-overview'">
			<app-candidate-profile (backEvent)="showSuggestionsResults()" [parentComponent]="parentComponent" [isViewOnly]="isViewOnly()" [infoItemConfig]="infoItemConfig" [suggestedCandidate]="suggestedCandidate" [candidateProfile]="candidateProfile" [skillFilters]="skillFilters"></app-candidate-profile>
		</div>
	</div>
</div>

<dialog #specUploadBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-suggestions-box-spec-hdr' | translate}}</h4>
 		<div class="filter-close-box" (click)="specUploadBox.close()">X</div>
	</div>
	<div class="specUploadBox;">
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'chooseType'">
			<p>{{'arenella-suggestions-box-spec-intro' | translate}}</p>
			<div class="job-spec-options">
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('doc')">{{'arenella-suggestions-box-spec-file' | translate}}</div>
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('text')">{{'arenella-suggestions-box-spec-text' | translate}}</div>
			</div>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'doc'">
			<input type="file" (change)="setJobSepecFile($event)">
			<br><br>
				<button class="btn btn-secondary" (click)="extractFiltersFromJobSpec()">{{'arenella-suggestions-box-spec-extraction' | translate}}</button>
			<br><br>
			<p>{{'arenella-suggestions-box-spec-file-types' | translate}}</p>
			<br><br>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'text'">
			<form [formGroup]="filterByJobSpecForm">
				<textarea formControlName="specAsText" (click)="clearSpecAsText()">
					
				</textarea>
				<br><br>
					<button class="btn btn-secondary" (click)="extractFiltersFromJobSpecText()">{{'arenella-suggestions-box-spec-extraction' | translate}}</button>
				<br><br>
				<br><br>
			</form>
		</div>
		<div class="modal-body" *ngIf="showFilterByJonSpecFailure">
			<p>{{'arenella-suggestions-box-spec-msg-failure' | translate}}</p>
		</div>
	</div>
</dialog> 

<!-- publicity -->
<dialog #publicityModal>

	<!--  Options -->
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-suggestions-box-publicity-hdr' | translate}}</h4>
		<div class="filter-close-box" (click)="publicityModal.close()">X</div>
	</div>
	<div class="modal-body publicity-suggestions">
		<table>
			<div *ngFor="let c of publicitySuggestions">
				{{getCountryCode(c.country)}} - {{'arenella-suggestions-box-publicity-exp' | translate}}: {{c.yearsExperience}}  {{'arenella-suggestions-box-publicity-years' | translate}} -  {{c.roleSought}}
			</div>
		</table>
	</div> 
</dialog>
<!-- Paid subscription only -->
<dialog #paidSubscriptionModal>
	<!--  Options -->
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-suggestions-paid-subscription-option' | translate}}</h4>
		<div class="filter-close-box" (click)="paidSubscriptionModal.close()">X</div>
	</div>
	<div class="modal-body">
		<p>{{'arenella-suggestions-paid-subscription-text-1' | translate}}</p>
		<p *ngIf="paidFeature == 'paidFeatureUnavailableCandidates'">{{'arenella-suggestions-paid-subscription-text-3' | translate}}</p>
		<p *ngIf="paidFeature == 'paidFeatureUnavailableCandidates'">{{'arenella-suggestions-paid-subscription-text-4' | translate}} : {{candidateTotals.unavailable}}</p>
		<p *ngIf="paidFeature == 'paidFeatureGeoZones'">{{'arenella-suggestions-paid-subscription-text-2-geozone' | translate}}</p>
		<p>{{'arenella-suggestions-paid-subscription-text-2' | translate}}</p>
		<button class="btn btn-secondary" (click)="choseSubscription()" download>{{'arenella-suggestions-paid-subscription-choose-subscription-btn' | translate}}</button>
	</div> 
</dialog>