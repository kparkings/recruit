<div class="page">

	<!-- Nav options -->
	<div class="nav-tabs-bar"></div>
		
	<div class="page-body">	
		
		<!-- Action buttons -->
		<div *ngIf="currentView === 'suggestion-results'" class="action-buttons">
			<button class="btn btn-secondary arenella-btn" (click)="showCreateAlertDialog()" download>Create Email Alert</button>
			<button class="btn btn-secondary arenella-btn" routerLink="/recruiter-alerts" download>Manage Alerts</button>
	        <button class="btn btn-secondary arenella-btn" (click)="showSavedCandidates()" download>My Candidates</button>
	        <button class="btn btn-secondary arenella-btn" (click)="openPublicityDialog()" *ngIf="isAuthenticatedAsAdmin()" download>Copy</button>
	        <button class="btn btn-secondary arenella-btn" (click)="showFilterByJobSpecDialog(specUploadBox)" download>Filter by Job Spec</button>
	        <button class="btn btn-secondary arenella-btn" (click)="doReset()">Reset</button>
	     </div>
		
		<div *ngIf="currentView === 'saved-candidates'">
			<app-saved-candidates [savedCandidates]="savedCandidates" (switchViewEvent)="showSuggestionsResults()" [infoItemConfig]="infoItemConfig" [skillFilters]="skillFilters"></app-saved-candidates>
		</div>
	
		<div>	
			<form [formGroup]="suggestionFilterForm" *ngIf="currentView === 'suggestion-results'">	
				<div *ngIf="currentView === 'suggestion-results'">		
					<table class="mobile-search-box">
						<tr>
							<td class="sugg-srch-hdr">Job Title</td>
							<td class="sugg-srch-bdy">
								<input type="text" value="Java Developer" class="sugg-srch-job-title" formControlName="searchPhrase">
							</td>
						</tr>
						<tr>
							<td class="sugg-srch-hdr">Country</td>
							<td class="sugg-srch-bdy country-filters">
								<span class="country-filter country-selected-{{includeResultsForCountry('nl')}}" (click)="toggleCountrySelection('nl')">
									<span class="flag-icon flag-icon-nl flag-icon-med"></span>
								</span>
								<span class="country-filter country-selected-{{includeResultsForCountry('be')}}" (click)="toggleCountrySelection('be')">
									<span class="flag-icon flag-icon-be flag-icon-med"></span>
								</span>
								<span class="country-filter country-selected-{{includeResultsForCountry('uk')}}" (click)="toggleCountrySelection('uk')">
									<span class="flag-icon flag-icon-gb flag-icon-med"></span>
								</span>
								<span class="country-filter country-selected-{{includeResultsForCountry('ie')}}" (click)="toggleCountrySelection('ie')">
									<span class="flag-icon flag-icon-ie flag-icon-med"></span>
								</span>
							</td>
						</tr>
					
						<tr>
							<td class="sugg-srch-hdr">Contract</td>
							<td class="sugg-srch-bdy">
								<select class="contract-type" formControlName="contractType">
									<option value="BOTH">Both (Includes unknown)</option>
									<option value="CONTRACT">Contract</option>
									<option value="PERM">Permanent</option>
								</select>
							</td>
						</tr>
						<tr>
							<td class="sugg-srch-hdr">Languages</td>
							<td class="sugg-srch-bdy">
								<ul class="sugg-srch-ctry-ul">
									<li class="sugg-srch-ctry-chkbox"><input type="checkbox" formControlName="dutchLanguage" class="lang-checkbox">Dutch</li>
									<li class="sugg-srch-ctry-chkbox"><input type="checkbox" formControlName="frenchLanguage" class="lang-checkbox">French</li>
									<li class="sugg-srch-ctry-chkbox"><input type="checkbox" formControlName="englishLanguage" class="lang-checkbox">English</li>
								</ul>					
							</td>
						</tr>
					
						<tr>
							<td class="sugg-srch-hdr">Years Exp</td>
							<td class="sugg-srch-bdy">
								<div>
									<select class="min" formControlName="minYearsExperience">
										<option *ngFor="let opt of minMaxOptions" value="{{opt}}">{{opt}}</option>
									</select>
									<span> <B>TO</B> </span>
									<select class="max" formControlName="maxYearsExperience">
										<option *ngFor="let opt of minMaxOptions" value="{{opt}}">{{opt}}</option>
									</select>
								</div>
							</td>
						</tr>
					
						<tr>
							<td class="sugg-srch-hdr">Skills</td>
							<td class="sugg-srch-bdy">
								<form [formGroup]="skilFilterForm">
									<input class="skill-field" type="text" formControlName="skill"><button (click)="addSkill()" class="btnX btn-secondary add-skill-btn">Add</button>
								</form>
							</td>
						</tr>
						<tr>
							<td colspan="2">
								<div style="min-height:35px;">
									<div class="selected-skill" *ngFor="let skill of skillFilters" (click)="removeSkill(skill)">{{skill}}</div>
								</div>
							</td>
						</tr>
					
					</table>
				</div>
			</form>
		</div>
	
		<!-- Suggestion Results -->
		<div *ngIf="currentView === 'suggestion-results'">
		
			<div class="suggestion-result-icons">
			
				<div class="suggestion-icon {{suggestionMobileClass}}" *ngFor="let suggestion of suggestions" (click)="showSuggestedCandidateOverview(suggestion)">
					<div>
						<div *ngIf="!isSavedCandidate(suggestion)" class="suggestion-icon-header">	
						C{{suggestion.candidateId}}
						</div>
						<div *ngIf="isSavedCandidate(suggestion)" class="suggestion-icon-header suggestion-icon-header-saved">	
						C{{suggestion.candidateId}}
						</div>
					</div>
					<div title="Accuracy Skills" class="suggestion-perception-result-{{suggestion.accuracySkills}}"></div>
					<div title="Accuracy Languages" class="suggestion-perception-result-{{suggestion.accuracyLanguages}}"></div>
					<div class="suggestion-icon-body">
						<div>
							{{suggestion.firstname}} {{suggestion.surname}}
						</div>
						<div>
							{{suggestion.roleSought}}
						</div>
					</div>
				</div>
				
			</div>
			<div class="suggestion-result-footer">&nbsp;</div>
		</div>

		<!-- Suggestion Profile -->
		<div *ngIf="currentView === 'suggested-canidate-overview'">
			<app-candidate-profile (backEvent)="showSuggestionsResults()" [parentComponent]="parentComponent" [isViewOnly]="isViewOnly()" [infoItemConfig]="infoItemConfig" [suggestedCandidate]="suggestedCandidate" [candidateProfile]="candidateProfile" [skillFilters]="skillFilters"></app-candidate-profile>
		</div>
	</div>
</div>

<dialog #specUploadBox>
	<div class="modal-header">
		<h4 class="modal-title">Extract Filters</h4>
 		<div class="filter-close-box" (click)="specUploadBox.close()">X</div>
	</div>
	<div class="specUploadBox;">
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'chooseType'">
			<p>Please choose how to upload the job specification to filter on</p>
			<div class="job-spec-options">
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('doc')">Upload File</div>
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('text')">Paste Text</div>
			</div>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'doc'">
			<input type="file" (change)="setJobSepecFile($event)">
			<br><br>
				<button class="btn btn-secondary" (click)="extractFiltersFromJobSpec()">Perform Extraction</button>
			<br><br>
			<p>File types of .doc, .docx and pdf up to 1MB</p>
			<br><br>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'text'">
			<form [formGroup]="filterByJobSpecForm">
				<textarea formControlName="specAsText" (click)="clearSpecAsText()">
					
				</textarea>
				<br><br>
					<button class="btn btn-secondary" (click)="extractFiltersFromJobSpecText()">Perform Extraction</button>
				<br><br>
				<br><br>
			</form>
		</div>
		<div class="modal-body" *ngIf="showFilterByJonSpecFailure">
			<p>Unfortunately it was not possible to extract filters from this file.</p>
		</div>
	</div>
</dialog> 

<dialog #feedbackBox >
	<div class="modal-header">
		<h4 class="modal-title">Create Email Alert</h4>
 		<div class="filter-close-box" (click)="feedbackBox.close()">X</div>
	</div>
	<div class="feedbackBox;">
		<form [formGroup]="createAlertForm">
			<div class="modal-body" *ngIf="showSaveAlertBox">
				<p class="info-text">Please add required filters before creating your alert</p>
				Alert Name: <input type="text" formControlName="alertName">
				<br/><br/>
				<button class="btn btn-secondary" (click)="saveAlert()" download>Save</button>
			</div>       
			<div class="modal-body" *ngIf="showSaveAlertBoxSuccess">
				<p>Your Candidate Search Alert was created successfully. You will now receive alerts when matching candidates are uploaded.</p>
				<p>You can manage alerts in the 'Manage Search Alerts' screen.</p>
			</div>
			<div class="modal-body" *ngIf="showSaveAlertBoxFailure">
				<p>Unfortunately it was not possible to create your Candidate Search Alert at this time.</p>
			</div>
		</form>
	</div>
</dialog>
<!-- publicity -->
<dialog #publicityModal>

	<!--  Options -->
	<div class="modal-header">
		<h4 class="modal-title">Publicity</h4>
		<div class="filter-close-box" (click)="publicityModal.close()">X</div>
	</div>
	<div class="modal-body publicity-suggestions">
		<table>
			<div *ngFor="let c of publicitySuggestions">
				{{getCountryCode(c.country) + ' - Exp: ' + c.yearsExperience + ' years - ' + c.roleSought}}
			</div>
		</table>
	</div> 
</dialog>