<div class="page">
	
	<!-- Nav options -->
	<div class="nav-tabs-bar"></div>
	
	<div class="page-body">
		<div [ngSwitch]="activeView">
			<div *ngSwitchCase="'list'">
				<div class="action-buttons">
					<button *ngIf="passedCreditCheck" 	(click)="showAdd()" 					class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-add-job' | translate}}</button>
					<button *ngIf="!passedCreditCheck" 	(click)="showNoCredits()" 				class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-add-job' | translate}}</button>
					<button *ngIf="passedCreditCheck"   (click)="showFilterByJobSpecDialog()"	class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-create-from-spec' | translate}}</button>
					<button *ngIf="!passedCreditCheck"  (click)="showNoCredits()"				class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-create-from-spec' | translate}}</button>
					<button routerLink="/listing" 												class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-back' | translate}}</button>
				</div>
				<div class="listing-pane">
					<div class="job-post" *ngFor="let listing of listings">
						<div (click)="showListingDetails(listing)">
							<div class="listing-title">{{getFormattedJobTitle(listing.title)}}</div>
							<div>
								<span title="{{listing.listingId}}" class="flag-icon flag-icon-{{getCountryISO2Code(listing.country)}} suggestion-flag-country listing-country"></span>
							</div>
							<div class="listing-views" title="views">
								{{listing.views}}
							</div>
							<div>
								<a href="{{listing.listingId}}"></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	
		<div [ngSwitch]="activeView">
			<div *ngSwitchCase="'show'">
	   			<div class="action-buttons">
					<button (click)="showPublicity()"		class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-publicity' | translate}}</button>
					<button (click)="showEditListing()" 	class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-edit' | translate}}</button>
					<button (click)="showConfirmDelete()"   class="btn btn-secondary arenella-btn" *ngIf="!enabldeDeleteOption">{{'arenella-recruiter-listing-btn-delete' | translate}}</button>
					<button (click)="performmDelete()" 	  	class="btn btn-secondary arenella-btn confirm-delete" *ngIf="enabldeDeleteOption">{{'arenella-recruiter-listing-btn-confirm' | translate}}</button>
					<button (click)="showList()" 			class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-back' | translate}}</button>
				</div>
				
				<app-candidate-info-box [config]="infoItemConfig"></app-candidate-info-box>
					
	        	<div class="right-body-pane">
	        		<div class="listing-view-div">
						<h1 *ngIf="!isMobile" class="listing-view-title">{{selectedListing.title}}</h1>
						<h1 *ngIf="isMobile" class="listing-view-title">Description</h1>
					</div>
					<div>
						<div>
							<pre style="white-space:pre-line;font-family: Roboto, 'Helvetica Neue', sans-serif;">{{selectedListing.description}}</pre>
						</div>
					</div>
				</div>
				
			</div>
				
			<!-- List Listings -->
			<div  *ngSwitchCase="['add', 'edit'].includes(activeView) ? activeView : !activeView">
				<div class="action-buttons">
					<!-- <button (click)="showFilterByJobSpecDialog()"	class="btn btn-secondary arenella-btn" download>{{'arenella-recruiter-listing-btn-create-from-spec' | translate}}</button>-->
					<button (click)="publishListing()" 				class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-publish' | translate}}</button>
					<button (click)="showPreviousShowOption()" 		class="btn btn-secondary arenella-btn">{{'arenella-recruiter-listing-btn-back' | translate}}</button>
				</div>
				<form [formGroup]="newListingFormBean">
						<div class="add-container">
							<h2>{{'arenella-recruiter-listing-step1' | translate}}</h2>
							<!--  <span class="listing-nav" >{{'arenella-recruiter-listing-previous' | translate}}</span>-->
							<div class="table content-container">
								<table>
									<tr>
										<td>{{'arenella-recruiter-listing-title' | translate}}</td>
										<td><input type="text" formControlName="title"></td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-type' | translate}}</td>
										<td>
											<select formControlName="type">
												<option *ngFor="let type of contractTypeOptions" [ngValue]="type.value">{{type.label | translate}}</option>
											</select>
										</td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-country' | translate}}</td>
										<td>
											<select formControlName="country">
												<option *ngFor="let opt of countryOptions" [ngValue]="opt.value">{{opt.label}}</option>
											</select>
										</td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-location' | translate}}</td>
										<td><input type="text" formControlName="location"></td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-exp' | translate}}</td>
										<td>
											<select formControlName="experienceYears">
												<option *ngFor="let yearVal of yearsExperienceValues" value="{{yearVal}}">{{yearVal}}</option>
											</select>
										</td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-rate' | translate}}</td>
										<td>
											<input type="radio" name="rateCurrency" value="EUR" class="radio-button" formControlName="rateCurrency"><label class="radio-button_label">{{'arenella-recruiter-listing-eur' | translate}}</label>
											<input type="radio" name="rateCurrency" value="GBP" class="radio-button" formControlName="rateCurrency"><label class="radio-button_label">{{'arenella-recruiter-listing-gbp' | translate}}</label>
											<br>
											<input type="text" formControlName="rate">
										</td>
									</tr>
								</table>
							</div>
						</div>
						
						<div  class="add-container">
							<h2>{{'arenella-recruiter-listing-step3' | translate}}</h2>
							<div class="table content-container">
								<table>
									<tr>
										<td>{{'arenella-recruiter-listing-contact-name' | translate}}</td>
										<td><input type="text" formControlName="contactName"></td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-company-name' | translate}}</td>
										<td><input type="text" formControlName="contactCompany"></td>
									</tr>
									<tr>
										<td>{{'arenella-recruiter-listing-email-address' | translate}}</td>
										<td><input type="text" formControlName="contactEmail"></td>
									</tr>
								</table>
							</div>
						</div>
						<div  class="add-container description-container">
							<h2>{{'arenella-recruiter-listing-step2' | translate}}</h2>
							<div class="content-container">
								<textarea class="addListingDesc" formControlName="description"></textarea>	
								
							</div>
						</div>
						<div  class="add-container add-container-mini">
							<h2>{{'arenella-recruiter-listing-step4' | translate}}</h2>
							<div class="content-container">
							<div style="float:left; width:150px; margin:2px;" *ngFor="let language of languages"><input type="checkbox" name="language" value="Dutch" class="checkbox-ctrl" formControlName="{{language}}"><label>{{language | translate}}</label></div>
							</div>
						</div>
						<div  class="add-container add-container-mini">
							<h2>{{'arenella-recruiter-listing-step5' | translate}}</h2>
							<div class="content-container">
							<div>
								<input type="text" formControlName="skill">
								<button class="btn btn-secondary arenella-btn addSkillBtn" (click)="addSkill()">{{'arenella-recruiter-listing-add-skill' | translate}}</button>
							</div>
							<div class="selected-skills-filter">
								<span *ngFor="let skill of skills" class="selected-skill" (click)="removeSkill(skill)">
									{{skill}}
								</span>
							</div>
						</div>
					</div>
				</form>
				<div class="listing-add-footer"></div>
			</div>
		</div>			
	</div>
</div>


<dialog #feedbackBox>
	<div class="modal-header">
		<h4 class="modal-title">{{feedbackBoxTitle}}</h4>
 				<div class="filter-close-box" (click)="closeModal()">X</div>
		</div>
		<div class="feedbackBox; {{feedbackBoxClass}}">
		<div class="modal-body">
			<ul class='feedback-failure'>
				<li *ngFor="let errMessage of validationErrors"> {{errMessage}} </li>
			</ul><br>
		</div>       
	</div>
</dialog> 

<dialog #specUploadBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-recruiter-listing-box-upld-extract-filters' | translate}}</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'chooseType'">
			<p>{{'arenella-recruiter-listing-box-upld-extract-filters-desc' | translate}}</p>
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('doc')">{{'arenella-recruiter-listing-box-upld-extract-filters-file' | translate}}</div>
			<div class="job-spec-upld-opt" (click)="switchJobSpecUpldOpt('text')">{{'arenella-recruiter-listing-box-upld-extract-tect' | translate}}</div>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'doc'">
			<input type="file" (change)="setJobSepecFile($event)">
			<br><br>
				<button class="btn btn-secondary" (click)="extractFiltersFromJobSpec()">{{'arenella-recruiter-listing-box-upld-extract-filters-btn-extract' | translate}}</button>
			<br><br>
			<p>{{'arenella-recruiter-listing-box-upld-extract-filters-file-type' | translate}}</p>
			<br><br>
		</div>
		<div class="modal-body" *ngIf="showFilterByJobSpec && jobSpecUploadView == 'text'">
			<form [formGroup]="filterByJobSpecForm">
				<textarea formControlName="specAsText" (click)="clearSpecAsText()">
					
				</textarea>
				<br><br>
					<button class="btn btn-secondary" (click)="extractFiltersFromJobSpecText()">{{'arenella-recruiter-listing-box-upld-extract-filters-extract' | translate}}</button>
				<br><br>
				<br><br>
			</form>
		</div>
		<div class="modal-body" *ngIf="showFilterByJonSpecFailure">
			<p>{{'arenella-recruiter-listing-box-upld-extract-filters-failure' | translate}}</p>
		</div>
	</div>
</dialog>


<!-- Publicity Box -->
<dialog #publicityBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-recruiter-listing-pub-title' | translate}}Publicity</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body"  style="height:400px;overflow:auto">
			<p>{{'arenella-recruiter-listing-pub-title' | translate}}: {{selectedListing.title}}</p>
			<br>
			<p>{{'arenella-recruiter-listing-pub-location' | translate}}: {{getCountryCode(selectedListing.country)}}</p>
			<br>
			<p>https://www.arenella-ict.com/listing/{{selectedListing.listingId}}</p>
			<br>
			<span>#openposition </span>
			<span>#itjob </span>
			<span>#itjobs </span>
			<span>#ictbaan </span>
			<span>#ictbanen </span>
			<span>#itjobboard </span>
			<span>#cvdatabase </span>
			<span *ngFor="let skill of selectedListing.skills">#{{skill}} </span>
		</div>
	</div>
</dialog>

<!-- Marketplace Box -->
<dialog #marketplaceBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-recruiter-listing-mp' | translate}}</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body"  style="min-height:400px;">
			<h3>{{'arenella-recruiter-listing-mp-add' | translate}}</h3>
			<p>{{'arenella-recruiter-listing-mp-add-text' | translate}}</p>
			<div style="min-width:320px;">
				
				<form [formGroup]="mpFormBean">
					<table class="mp-box-table">
						<tr>
							<td style="text-align:left;">{{'arenella-recruiter-listing-mp-start' | translate}}</td>
							<td style="padding-left:10px;"><input type="date" formControlName="startDate"/></td>
						</tr>
						<tr>
							<td style="text-align:left;">{{'arenella-recruiter-listing-mp-last-submission' | translate}}</td>
							<td style="padding-left:10px;"><input type="date" formControlName="lastSubmissionDate"/></td>
						</tr>
						<tr>
							<td style="text-align:left;" colspan="2">{{'arenella-recruiter-listing-mp-comments' | translate}}</td>
	
						</tr>
						<tr>
							<td colspan="2">	
								<textarea class="textarea-mp-desc" formControlName="comments"></textarea>
							</td>
						</tr>
					</table>
				</form>
			</div>
			
			<div>
				<button class="btn btn-secondary arenella-btn suggestion-button" (click)="declineMarketplace()">{{'arenella-recruiter-listing-mp-btn-decline' | translate}}</button>
				<button class="btn btn-secondary arenella-btn suggestion-button" (click)="publishOpenPosition()">{{'arenella-recruiter-listing-mp-btn-agree' | translate}}</button>
			</div>
			
		</div>
	</div>
</dialog>