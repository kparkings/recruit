<div class=".containerX m-2X page">
	
	<!-- Nav options -->
	<ul class="nav nav-tabs">
	  <li class="nav-item">
	    <span class="nav-link tabNav tabNavActive" *ngIf="showDemand  && unseenOpenPositions > 0" (click)="switchTab('showDemand')"><span class="unseen-posts">{{unseenOpenPositions}}</span>Requested Candidates</span>
	    <span class="nav-link tabNav tabNavActive" *ngIf="showDemand  && unseenOpenPositions <= 0" (click)="switchTab('showDemand')"><span style="margin-left:20px;">&nbsp;</span>Requested Candidates</span>
	    <span class="nav-link tabNav" *ngIf="!showDemand && unseenOpenPositions > 0" (click)="switchTab('showDemand')"><span class="unseen-posts">{{unseenOpenPositions}}</span>Requested Candidates</span>
	    <span class="nav-link tabNav" *ngIf="!showDemand   && unseenOpenPositions <= 0" (click)="switchTab('showDemand')"><span style="margin-left:20px;">&nbsp;</span>Requested Candidates</span>
	  </li>
	  <li class="nav-item">
	    <span class="nav-link tabNav tabNavActive" *ngIf="showSupply  && unseenOfferedCandidates >  0"  (click)="switchTab('showSupply')"><span class="unseen-posts">{{unseenOfferedCandidates}}</span>Your Candidates</span>
	    <span class="nav-link tabNav tabNavActive" *ngIf="showSupply  && unseenOfferedCandidates <=  0"  (click)="switchTab('showSupply')"><span style="margin-left:20px;">&nbsp;</span>Your Candidates</span>
	    <span class="nav-link tabNav" *ngIf="!showSupply  && unseenOfferedCandidates >  0" (click)="switchTab('showSupply')"><span class="unseen-posts">{{unseenOfferedCandidates}}</span>Your Candidates</span>
	    <span class="nav-link tabNav" *ngIf="!showSupply   && unseenOfferedCandidates <=  0" (click)="switchTab('showSupply')"><span style="margin-left:20px;">&nbsp;</span>Your Candidates</span>
	  </li>
	</ul>
	
	<div class="container-div">
	
		<!-- Supply -->
		<div *ngIf="showSupply">
			<p>
			Do you have candidates that you cannot currently place? Would you like to make these candidates available
			to other recruiters for a rate set by you? If so this feature is for you. Add your available candidates and 
			allow other recruiters to contact you with available projects.  
			</p>
			
			<div class="action-buttons">
				<button class="btn btn-secondary action-btn  main-action_btn" 	(click)="switchTab('addSupply')" 	*ngIf="!isAuthenticatedAsAdmin()">Offer Candidate</button>
			</div>
			<!-- List of offered Candidates -->
			<div>
			
				<table class="table marketplace-table">
					<thead>
						<tr>
							<th class="bg-tab-hdr">Country</th>
							<th class="bg-tab-hdr">Firstname</th>
							<th class="bg-tab-hdr">Surname</th>
							<th class="bg-tab-hdr">Role</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let candidate of offeredCandidates" class="as-link" (click)="viewCandidate(candidate)">
							<td class="table-bdy-td" align="center">
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'NETHERLANDS'"  		class="flag-icon flag-icon-nl"></span>
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'BELGIUM'"				class="flag-icon flag-icon-be"></span>
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'UK'"					class="flag-icon flag-icon-gb"></span>
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'REPUBLIC_OF_IRELAND'"	class="flag-icon flag-icon-ie"></span>
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'EU_REMOTE'"			class="flag-icon flag-icon-eu"></span>
								<span title="{{candidate.country}}" *ngIf="candidate.country === 'WORLD_REMOTE'"		class="flag-icon flag-icon-xx"></span>
							</td>
							<td>{{candidate.firstname}}</td>
							<td>{{candidate.surname}}</td>
							<td>{{candidate.roleSought}}</td>
						</tr>
					</tbody>	
				</table>
			</div>
		</div>
		
		<!-- Show Demand  -->
		<div *ngIf="showDemand">
			<p>
			Do you have a position that you currently cannot fill? Would you like other Recruiters to be able to contact you 
			with their available candidates in order to help you will the position. If so this feature is for you. Add details 
			of the position you are trying to fill and allow other Recruiters to contact you with suitable candidates.  
			</p>
			<div class="action-buttons">
				<button class="btn btn-secondary action-btn" 					(click)="showJustMyOpenPositions()" 	*ngIf="!showJustMyOpenPositionsActive">My Candidates</button>
				<button class="btn btn-secondary action-btn" 					(click)="fetchOpenPositions()" 		*ngIf="showJustMyOpenPositionsActive">All Candidates</button>
				<button class="btn btn-secondary action-btn main-action_btn" 	(click)="switchTab('addDemand')" *ngIf="!isAuthenticatedAsAdmin() && passedCreditCheck">Request Candidate</button>
				<button class="btn btn-secondary action-btn main-action_btn" 	(click)="showNoCredits()" *ngIf="!isAuthenticatedAsAdmin() && !passedCreditCheck">Request Candidate</button>
			</div>
			<!-- List of Requested Candidates -->
			<div>
			
			</div>
			<!-- Request Candidate -->
			<div>
				<table class="table marketplace-table">
					<thead>
						<tr>
							<th class="bg-tab-hdr">Created</th>
							<th class="bg-tab-hdr">Position</th>
							<th class="bg-tab-hdr" *ngIf="!showJustMyOpenPositionsActive">Country</th>
							<th class="bg-tab-hdr" *ngIf="!showJustMyOpenPositionsActive">Closing Date</th>
						</tr>
					</thead>
					<tbody>
						<tr  *ngFor="let openPosition of openPositions" class="as-link">
							<td class="table-bdy-td td-date" *ngIf="openPosition.viewed || !isNotMineOP(openPosition)" 	(click)="viewOpenPosition(openPosition)">{{openPosition.created}}</td>
							<td class="table-bdy-td td-date" *ngIf="!openPosition.viewed && isNotMineOP(openPosition)" 	(click)="viewOpenPosition(openPosition)"><b>{{openPosition.created}}</b></td>

							<td class="table-bdy-td" 		 *ngIf="openPosition.viewed || !isNotMineOP(openPosition)"	(click)="viewOpenPosition(openPosition)">{{openPosition.positionTitle}}</td>
							<td class="table-bdy-td" 		 *ngIf="!openPosition.viewed && isNotMineOP(openPosition)"	(click)="viewOpenPosition(openPosition)"><b>{{openPosition.positionTitle}}</b></td>
														
							<td class="table-bdy-td" 		 (click)="viewOpenPosition(openPosition)"align="center" *ngIf="!showJustMyOpenPositionsActive">
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'NETHERLANDS'"  	class="flag-icon flag-icon-nl"></span>
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'BELGIUM'"		class="flag-icon flag-icon-be"></span>
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'UK'"			class="flag-icon flag-icon-gb"></span>
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'IRL'"			class="flag-icon flag-icon-ie"></span>
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'EU_REMOTE'"		class="flag-icon flag-icon-eu"></span>
								<span title="{{openPosition.country}}" *ngIf="openPosition.country === 'WORLD_REMOTE'"	class="flag-icon flag-icon-xx"></span>
							
							</td>
							<td class="table-bdy-td td-date" (click)="viewOpenPosition(openPosition)" *ngIf="!showJustMyOpenPositionsActive && (openPosition.viewed || !isNotMineOP(openPosition))">{{openPosition.positionClosingDate}}</td>
							<td class="table-bdy-td td-date" (click)="viewOpenPosition(openPosition)" *ngIf="!showJustMyOpenPositionsActive && !openPosition.viewed && isNotMineOP(openPosition)"><b>{{openPosition.positionClosingDate}}</b></td>
						</tr>
						
					</tbody>	
				</table>
			</div>
		</div>
		<!-- Add Demand  -->
		<div *ngIf="addDemand">
			<h3>Add details of position you wish to fill via other recruiters</h3>
			<div class="action-buttons">
				<button class="btn btn-secondary btnRight {{suggestionMobileBtnClass}}" (click)="showFilterByJobSpecDialog()" download>Create by Spec</button>
				<button class="btn btn-secondary btnRight {{suggestionMobileBtnClass}}" (click)="showOpenPositions()">Back</button>
				<button class="btn btn-secondary btnRight {{suggestionMobileBtnClass}}" (click)="publishOpenPosition()">Publish</button>
			</div>
			<form [formGroup]="requestedCandidateFormBean">
				<table class="table marketplace-table">
					<tr>
						<td>Position Title</td>
						<td>
							<input formControlName="positionTitle" type="text"/>
						</td>	
					</tr>
					<tr>
						<td>Country</td>
						<td>
							<select formControlName="country">
								<option></option>
								<option value="BELGIUM">Belgium</option>
								<option value="IRL">Ireland</option>
								<option value="NETHERLANDS">Netherlands</option>
								<option value="UK">UK</option>
								<option value="EUROPE">EU</option>
								<option value="WORLD">World</option>
							</select>
						</td>	
					</tr>
					<tr>
						<td>Location</td>
						<td>
							<input formControlName="location" type="text"/>
						</td>	
					</tr>
					<tr>
						<td>Contract Type</td>
						<td>
							<select  formControlName="contractType">
								<option></option>
								<option value="CONTRACT">Contract</option>
								<option value="PERM">Perm</option>
								<option value="BOTH">Both</option>
							</select>
						</td>	
					</tr>
					<tr>
						<td>Salary / Rate</td>
						<td>
							<input formControlName="renumeration" type="text"/>
						</td>	
					</tr>
					<tr>
						<td>
							Skills
						</td>
						<td class="sugg-srch-bdy">
							<input type="text" formControlName="skill"><button (click)="addOfferedPositionSkill()" class="btn btn-secondary add-skill-btn" *ngIf="!isAuthenticatedAsAdmin()">Add</button>
							<div style="min-height:35px;">
								<div class="selected-skill" *ngFor="let skill of requestedCandidateCoreSkills" (click)="removeRequestedCandidateSkill(skill)">{{skill}}</div>
							</div>
						</td>	
					</tr>
					<tr>
						<td>Start Date</td>
						<td>
							<input formControlName="startDate" type="date"/>
						</td>	
					</tr>
					<tr>
						<td>Position Closing Date</td>
						<td>
							<input formControlName="positionClosingDate" type="date"/>
						</td>	
					</tr>
					<tr>
						<td>Description</td>
						<td>
							<textarea formControlName="description"></textarea>
						</td>	
					</tr>
					<tr>
						<td>Comments</td>
						<td>
							<textarea formControlName="comments"></textarea>
						</td>	
					</tr>
				</table>
			</form>
		</div>
	</div>
	
	<!-- Edit Demand  -->
	<div *ngIf="editDemand">
		<h3>Update Requested Candidate</h3>
		<div class="action-buttons">
			<button class="btn btn-secondary btnRight {{suggestionMobileBtnClass}}" (click)="publishOpenPosition()">Update</button>
			<button class="btn btn-secondary btnRight {{suggestionMobileBtnClass}}" (click)="showOpenPositions()">Back</button>
		</div>
		<form [formGroup]="requestedCandidateFormBean">
		<table class="table marketplace-table">
			<tr>
				<td>Position Title</td>
				<td>
					<input formControlName="positionTitle" type="text"/>
					</td>	
				</tr>
				<tr>
					<td>Country</td>
					<td>
						<select formControlName="country">
							<option></option>
							<option value="BELGIUM">Belgium</option>
							<option value="IRL">Ireland</option>
							<option value="NETHERLANDS">Netherlands</option>
							<option value="UK">UK</option>
							<option value="EUROPE">EU</option>
							<option value="WORLD">World</option>
						</select>
					</td>	
				</tr>
				<tr>
					<td>Location</td>
					<td>
						<input formControlName="location" type="text"/>
					</td>	
				</tr>
				<tr>
					<td>Contract Type</td>
					<td>
						<select  formControlName="contractType">
							<option></option>
							<option value="CONTRACT">Contract</option>
							<option value="PERM">Perm</option>
							<option value="BOTH">Both</option>
						</select>
					</td>	
				</tr>
				<tr>
					<td>
						Skills
					</td>
					<td class="sugg-srch-bdy">
						<input type="text" formControlName="skill"><button (click)="addOfferedPositionSkill()" class="btn btn-secondary add-skill-btn" *ngIf="!isAuthenticatedAsAdmin()">Add</button>
						<div style="min-height:35px;">
							<div class="selected-skill" *ngFor="let skill of requestedCandidateCoreSkills" (click)="removeRequestedCandidateSkill(skill)">{{skill}}</div>
						</div>
					</td>	
				</tr>
				<tr>
					<td>Salary / Rate</td>
					<td>
						<input formControlName="renumeration" type="text"/>
					</td>	
				</tr>
				<tr>
					<td>Start Date</td>
					<td>
						<input formControlName="startDate" type="date"/>
					</td>	
				</tr>
				<tr>
					<td>Position Closing Date</td>
					<td>
						<input formControlName="positionClosingDate" type="date"/>
					</td>	
				</tr>
				<tr>
					<td>Description</td>
					<td>
						<textarea formControlName="description"></textarea>
					</td>	
				</tr>
				<tr>
					<td>Comments</td>
					<td>
						<textarea formControlName="comments"></textarea>
					</td>	
				</tr>
			</table>
		</form>
		
	</div>
	<!-- Open Position Details -->
	<div *ngIf="showDemandDetails">
		<div class="action-buttons">
			<button class="btn btn-secondary btnRight main-btn {{suggestionMobileBtnClass}}" *ngIf="isMyOpenPosition()" (click)="editOpenPosition(activeOpenPosition)">Edit</button>
			<button class="btn btn-secondary btnRight main-btn {{suggestionMobileBtnClass}}" *ngIf="isMyOpenPosition() && confirmDeleteOpenPosition != activeOpenPosition.id"  (click)="deleteMyOpenPosition(activeOpenPosition.id)">Delete</button>
			<button class="btn btn-secondary btnRight main-btn {{suggestionMobileBtnClass}} small-action-btn-confirm-del " *ngIf="isMyOpenPosition() && confirmDeleteOpenPosition === activeOpenPosition.id" (click)="applyDeleteMyOpenPosition(activeOpenPosition.id)">Confirm</button>
			<button class="btn btn-secondary btnRight main-btn {{suggestionMobileBtnClass}}" (click)="showOpenPositions()">Back</button>
		</div>
		<div class="left-box-container {{mobileListingLeftPaneContainer}}">
		<!--  div-->
      		<div>
      			
      			<h1 *ngIf="isMobile" class="listing-view-title {{mobileListingViewTitle}}">{{activeOpenPosition.positionTitle}}</h1>
      				<div class="left-box {{mobileLeftBox}}" style="float:left;">
     					<div>
     						<img class="profile-photo-details" *ngIf="!isMobile && recruiterProfile?.profilePhoto?.imageBytes" id='base64image' src='data:image/jpeg;base64, {{recruiterProfile?.profilePhoto?.imageBytes}}' />
						<div *ngIf="!recruiterProfile?.profilePhoto?.imageBytes && !isMobile" class="profile-photo-details material-icons person ">
							<span style="font-size:300px;color:green;">person</span>
						</div>
						<br>
						<br>
						<button class="btn btn-secondary action-btn main-action_btn main-btns main-bt" style="width:98%;margin-left:0px;;margin-right:10px;background:grey;" (click)="contactRecruiter()" *ngIf="isMyOpenPosition()" disabled>Contact</button>
						<button class="btn btn-secondary action-btn main-action_btn main-btns main-bt" style="width:98%;margin-left:0px;;margin-right:10px;;background:green;" (click)="contactRecruiter()" *ngIf="!isMyOpenPosition()">Contact</button>
						<br>
     				</div>
     				
     				</div>
     				<div class="left-box {{mobileLeftBox}}" *ngIf="activeOpenPosition?.recruiter?.recruiterName">
     					<h5>Requested By</h5>
     					<div class="left-box-body">
      						<table>
      							<tr>
      								<th>Name</th>
      								<td>{{activeOpenPosition?.recruiter?.recruiterName}}</td>
      							</tr>
      							<tr>
      								<th>Company</th>
      								<td>{{activeOpenPosition?.recruiter?.companyName}}</td>
      							</tr>
      						</table>
     					</div>
     				</div>
     			
      				
				<div class="left-box {{mobileLeftBox}}" *ngIf="activeOpenPosition.country || activeOpenPosition.location">
					<h5>Location</h5>
					<div class="left-box-body">
						<table>
							<tr *ngIf="activeOpenPosition.country">
								<th>Country</th>
								<td>{{getCountryCode(activeOpenPosition.country)}}</td>
							</tr>
							<tr *ngIf="activeOpenPosition.location">
								<th>City</th>
								<td>{{activeOpenPosition.location}}</td>
							</tr>
						</table>
					</div>
				</div>
			
				<div class="left-box {{mobileLeftBox}}" *ngIf="activeOpenPosition.skills.length > 0">
  					<h5>Skills</h5>
  					<div class="left-box-body">
						<table>
							<tr>
								<td><span class="skill" *ngFor="let skill of activeOpenPosition.skills">{{skill}}</span></td>
							</tr>
						</table>
					</div>
  				</div>
	        	<div class="left-box {{mobileLeftBox}}" *ngIf="activeOpenPosition.contractType || activeOpenPosition.startDate || activeOpenPosition.renumeration">
					<h5>Conditions</h5>
					<div class="left-box-body">
						<table>
							<tr *ngIf="activeOpenPosition.contractType">
								<th>Contract Type</th>
								<td>{{getContractType(activeOpenPosition.contractType)}}</td>
							</tr>
							<tr *ngIf="activeOpenPosition.startDate">
								<th>Start Date</th>
								<td>{{activeOpenPosition.startDate}}</td>
							</tr>
							<tr *ngIf="activeOpenPosition.renumeration">
								<th>Rate/Salary</th>
								<td>{{activeOpenPosition.renumeration}}</td>
							</tr>
						</table>
					</div>
				</div>	
			</div>
		
			
		</div>
		<div class="desc-bdy {{mobileDescBody}}">
      			<div class="listing-view-div">
					<h1 *ngIf="!isMobile" class="listing-view-title">{{activeOpenPosition.positionTitle}}</h1>
					<h1 *ngIf="isMobile" class="listing-view-title">Description</h1>
				</div>
				<div>
					<div>
						<pre style="white-space:pre-line;font-family: Roboto, 'Helvetica Neue', sans-serif;">{{activeOpenPosition.description}}</pre>
					</div>
				</div>
				<div *ngIf="activeOpenPosition.comments">
					<h1 *ngIf="isMobile" class="listing-view-title">Comments</h1>
					<div>
						<pre style="white-space:pre-line;font-family: Roboto, 'Helvetica Neue', sans-serif;">{{activeOpenPosition.comments}}</pre>
					</div>
				</div>
				<div class="candidate-view-div-footer"></div>
			</div>
</div>

<dialog #feedbackBox>
	<div class="modal-header">
		<h4 class="modal-title">{{feedbackBoxTitle}}</h4>
 				<div class="filter-close-box" (click)="closeModal()">X</div>
		</div>
		<div class="feedbackBox; {{feedbackBoxClass}}">
		<div class="modal-body">
			<ul class='feedback-failure'>
				<li *ngFor="let errMessage of validationErrors"> {{errMessage}} </li>
			</ul><br>
		</div>       
	</div>
</dialog> 

<dialog #contactBox>
	<div class="modal-header">
		<h4 class="modal-title">Send Message To Recruiter</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="modal-body" *ngIf="contactRecruiterView === 'message'">
		<form [formGroup]="sendMessageGroup">
			<textarea formControlName="message"></textarea>
			<button class="btn btn-secondary action-btn btn-right" (click)="sendMessageToRecruiter()" 	*ngIf="!showJustMyOpenPositionsActive">Send</button>
		</form>	
	</div>
	<div class="modal-body message-send-success" *ngIf="contactRecruiterView === 'success'">
			<p>Message Sent Successfully</p>
			<p>You can view a copy of your message and any replies in your inbox</p>
	</div>
	<div class="modal-body" *ngIf="contactRecruiterView === 'failure'">
			<p class="message-send-failure">Failed to Send Message</p>
	</div>
</dialog> 

<dialog #specUploadBox>
	<div class="modal-header">
		<h4 class="modal-title">Extract Filters</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="feedbackBox">
		<div class="modal-body" *ngIf="showFilterByJobSpec">
			<input type="file" (change)="setJobSepecFile($event)">
			<br><br>
				<button class="btn btn-secondary" (click)="extractFiltersFromJobSpec()">Perform Extraction</button>
			<br><br>
			<p>File types of .doc, .docx and pdf up to 1MB</p>
			<br><br>
		</div>
		<div class="modal-body" *ngIf="showFilterByJonSpecFailure">
			<p>Unfortunately it was not possible to extract filters from this file.</p>
		</div>
	</div>
</dialog> 