<div class="page">
	<!-- Nav options -->
	<div class="nav-tabs-bar"></div>

	<div class="page-body">
		<div [ngSwitch]="activeView">
		
	    <!-- List View -->
	    <div *ngSwitchCase="'list'">
	    	<div class="action-buttons" >
				<button class="btn btn-secondary arenella-btn" (click)="openCreateAlertDialog()" *ngIf="!isAuthenticated() || isAuthenticated() && isCandidate()">{{'arenella-listing-btn-create' | translate}}</button>
				<button class="btn btn-secondary arenella-btn" routerLink="/recruiter-listings" *ngIf="isAuthenticated() && !isAuthenticatedAsAdmin() && !isCandidate()">{{'arenella-listing-btn-your-posts' | translate}}</button>
			</div>
	       	<!-- Listings Table -->
			<div>
				<div class="site-header" *ngIf="!isLoggedIn()">
					<h1>{{'arenella-listing-title' | translate}}</h1>
					<h5>{{'arenella-listing-intro' | translate}}</h5>
				</div>
				<div class="filters">
					<div class="filters-title" *ngIf="displayFilters"  (click)="toggleFilters()">{{'arenella-listing-filters' | translate}}:<span style="float:right; margin-right:20px;cursor:pointer"> {{'arenella-listing-filters-hide' | translate}} </span></div>
					<div class="filters-title" *ngIf="!displayFilters" (click)="toggleFilters()">{{'arenella-listing-filters' | translate}}:<span style="float:right; margin-right:20px;cursor:pointer"> {{'arenella-listing-filters-shw' | translate}} </span></div>
					<table *ngIf="displayFilters">
						<tr>
							<th>{{'arenella-listing-contract-type' | translate}}</th>
							<td>
								<div>
									<ul class="contract-type-filter">
										<li><span class="{{getFilterTypeClass('')}}" 		 		(click)="updateContractTypeFilter('')"></span>{{'arenella-listing-contract-type-both' | translate}}</li>
										<li><span class="{{getFilterTypeClass('CONTRACT_ROLE')}}" 	(click)="updateContractTypeFilter('Contract')"></span>{{'arenella-listing-contract-type-contract' | translate}}</li>
										<li><span class="{{getFilterTypeClass('PERM_ROLE')}}" 	 	(click)="updateContractTypeFilter('Perm')"></span>{{'arenella-listing-contract-type-perm' | translate}}</li>
									</ul>
								</div>
							</td>
						</tr>
						<tr>
							<th>{{'arenella-listing-contract-age' | translate}}</th>
							<td>
								<div>
									<ul class="contract-type-filter">
										<li><span class="{{getPostAgeClass('ALL')}}"	 	 	(click)="updatePostAgeFilter('ALL')"></span>{{'arenella-listing-contract-all' | translate}}</li>
										<li><span class="{{getPostAgeClass('TODAY')}}" 	 		(click)="updatePostAgeFilter('TODAY')"></span>{{'arenella-listing-contract-today' | translate}}</li>
										<li><span class="{{getPostAgeClass('THIS_WEEK')}}" 		(click)="updatePostAgeFilter('THIS_WEEK')"></span>{{'arenella-listing-contract-week' | translate}}</li>
										<li><span class="{{getPostAgeClass('THIS_MONTH')}}" 	(click)="updatePostAgeFilter('THIS_MONTH')"></span>{{'arenella-listing-contract-month' | translate}}</li>
									</ul>
								</div>
							</td>
						</tr>
					</table>
				</div>
				<div class="listing-pane">
					<div class="job-post" *ngFor="let listing of listings">
						<div (click)="showListingDetails(listing)">
							<div class="listing-title">{{getFormattedJobTitle(listing.title)}}</div>
							<div>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'NETHERLANDS'"  	class="flag-icon flag-icon-nl suggestion-flag-country listing-country"></span>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'BELGIUM'"		class="flag-icon flag-icon-be suggestion-flag-country listing-country"></span>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'UK'"			class="flag-icon flag-icon-gb suggestion-flag-country listing-country"></span>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'IRELAND'"		class="flag-icon flag-icon-ie suggestion-flag-country listing-country"></span>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'EU_REMOTE'"		class="flag-icon flag-icon-eu suggestion-flag-country listing-country"></span>
								<span title="{{listing.listingId}}" *ngIf="listing.country === 'WORLD_REMOTE'"	class="flag-icon flag-icon-xx suggestion-flag-country listing-country"></span>	
							</div>
							<div class="job-post-contract-type">
								{{getFormattedContractType(listing.type)}}
							</div>
							<div>
								<a href="{{getExternalUrl(listing.listingId)}}"></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Show Selected Listing View -->
		<div>
			<div  *ngSwitchCase="'show'">
	       		<!-- Action buttons -->
				<div class="action-buttons">
					<button class="btn btn-secondary arenella-btn" *ngIf="isAuthenticated() && isAuthenticatedAsAdmin()" (click)="showPublicity()">{{'arenella-listing-btn-publicity' | translate}}</button>
					<button (click)="showList()" class="btn btn-secondary arenella-btn">{{'arenella-listing-btn-back' | translate}}</button>
				</div>
				
				<app-candidate-info-box [config]="infoItemConfig"></app-candidate-info-box>
				
				<div>
	       			<div>
	       				<h1 class="listing-view-title">{{selectedListing.title}}</h1>
	       				
	       			</div>
	       			
	       			<div class="desc-body">
			       		
						<div>
							<div>
								<pre style="white-space:pre-line;font-family: Roboto, 'Helvetica Neue', sans-serif;">{{selectedListing.description}}</pre>
							</div>
							<div *ngIf="!isCandidate()" style="min-width:75%">
								<form [formGroup]="emailRequestFormBean">
									<div>
										<p class="email-label">{{'arenella-listing-your-name' | translate}}:</p>
										<input class="email-input" type="email" formControlName="name">
									</div>
									<div>
										<p class="email-label">{{'arenella-listing-your-email' | translate}}:</p>
										<input class="email-input" type="email" formControlName="email">
									</div>
									<p class="email-label">{{'arenella-listing-message-to-recruiter' | translate}}</p>
									<textarea class="contact-recruiter-textarea" formControlName="message"></textarea>
									<div class="div-spacing">
										<p class="email-label">{{'arenella-listing-curriculum' | translate}}</p>
										<input class="email-input" type="file" (change)="uploadCurriculumFile($event)"> 
										<div style="margin-top:10px">{{'arenella-listing-your-doc-types' | translate}}</div>
									</div>
										<div class="action-buttons">
											<button class="btn btn-secondary arenella-btn" (click)="sendEmailRequest()" *ngIf="enableSendEmail()">{{'arenella-listing-btn-send' | translate}}</button>
											<button class="btn btn-secondary arenella-btn" disabled *ngIf="!enableSendEmail()">{{'arenella-listing-btn-send' | translate}}</button>
										</div>
								</form>
							</div>
							<div *ngIf="isCandidate()" style="min-width:75%">
								<form [formGroup]="emailRequestFormBean">
									<p class="email-label">{{'arenella-listing-messate-to-recruiter' | translate}}</p>
									<textarea class="contact-recruiter-textarea" formControlName="message"></textarea>
									<div class="div-spacing">
										<p class="email-label">{{'arenella-listing-curriculum' | translate}}Curriculum</p>
										<div *ngIf="!curriculumFile">
											<br>
											<input type="checkbox" disabled="disabled" checked><span>{{'arenella-listing-use-stored-cv' | translate}}</span>
											<br><br>
											<p>Or</p>
										</div>
										<input class="email-input" name="selected-file" type="file" (change)="uploadCurriculumFile($event)"> 
										<div style="margin-top:10px">{{'arenella-listing-your-doc-types' | translate}}</div>
									</div>
									<div class="action-buttons">
										<button class="btn btn-secondary arenella-btn" (click)="sendEmailRequest()" *ngIf="enableSendEmail()">{{'arenella-listing-btn-send' | translate}}</button>
										<button class="btn btn-secondary arenella-btn" disabled *ngIf="!enableSendEmail()">{{'arenella-listing-btn-send' | translate}}Send</button>
									</div>
								</form>
							</div>
		       			</div>
		       		</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
	
	


<!-- Feedback Box -->
<dialog #feedbackBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-listing-feedback-title' | translate}}</h4>
 		<div class="filter-close-box" (click)="feedbackBox.close()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body" *ngIf="showSendAlertBoxSuccess">
			<p>{{'arenella-listing-feedback-msg1' | translate}}</p>
			<p>{{'arenella-listing-feedback-msg2' | translate}}</p>
		</div>
		<div class="modal-body" *ngIf="showSendAlertBoxFailure">
			<p>{{'arenella-listing-feedback-failure' | translate}}</p>
		</div>
	</div>
</dialog>
<!-- Publicity Box -->
<dialog #publicityBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-listing-publicity' | translate}}</h4>
 		<div class="filter-close-box" (click)="publicityBox.close()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body"  style="height:400px;">
			<p>{{'arenella-listing-publicity-open-position' | translate}}Open Position: {{selectedListing.title}}</p>
			<br>
			<p>{{'arenella-listing-publicity-location' | translate}}: {{getCountryCode(selectedListing.country)}}</p>
			<br>
			<p>https://www.arenella-ict.com/listing/{{selectedListing.listingId}}</p>
			<br>
			<span>#openposition </span>
			<span>#itjob </span>
			<span>#itjobs </span>
			<span>#ictbaan </span>
			<span>#ictbanen </span>
			<span>#itjobboard </span>
			<span>#cvdatabase </span>
			<span *ngFor="let skill of selectedListing.skills">#{{skill}} </span>
		</div>
	</div>
</dialog>
<!-- Listing Alert Box -->
<dialog #listingAlertBox>
	<div class="modal-header">
		<h4 class="modal-title">{{'arenella-listing-email-alert' | translate}}</h4>
 		<div class="filter-close-box" (click)="listingAlertBox.close()">X</div>
	</div>
	<div class="feedbackBox;">
		<form [formGroup]="alertFormBean">
			<div class="modal-body"  style="height:400px;">
				<div *ngIf="createAlertStep == 0">
					<P>{{'arenella-listing-email-alert-1' | translate}}</P>
					<select formControlName="contractType">
						<option *ngFor="let type of contractTypeOptions" [ngValue]="type.value">{{type.label}}</option>
					</select>
				</div>
				<div *ngIf="createAlertStep == 1">
					<P>{{'arenella-listing-email-alert-2' | translate}}</P>
					<div class="alert-options center">
						<div class="listing-alert-option {{selectedFunctionTypeCss(sft)}}" *ngFor="let sft of selectableFunctionTypes" (click)="toggleFunctionType(sft)">{{sft.functionType.humanReadable}}</div>
					</div>
				</div>
				<div *ngIf="createAlertStep == 2">
					<P>{{'arenella-listing-email-alert-3' | translate}}</P>
					<div class="alert-options center">
						<div class="listing-alert-option {{selectedCountryCss(sc)}}" *ngFor="let sc of selectableCountries" (click)="toggleCountry(sc)">{{sc.country.humanReadable}}</div>
					</div>
				</div>
				<div *ngIf="createAlertStep == 3">
					<P>{{'arenella-listing-email-alert-confirm' | translate}}</P>
					<div style="margin-top:50px;">
						<b style="margin-right:10px;">{{'arenella-listing-email-alert-email' | translate}}:</b><input type="email" formControlName="emailAddress" (keyup)="handleAlertEmailOnChange()"/>
					</div>
				</div>
				<div *ngIf="createAlertStep == 4">
					<P>&nbsp;</P>
					<div style="margin-top:50px;">
						<h1>{{'arenella-listing-email-alert-created' | translate}}</h1>
					</div>
				</div>
				<div style="clear:both;margin-top:50px;" >
					<button *ngIf="createAlertStep != 0 && createAlertStep != 4" class="btn btn-secondary arenella-btn" (click)="createListingAlertLastStep()">{{'arenella-listing-email-alert-btn-back' | translate}}</button>
					<button *ngIf="createAlertStep != 3 && createAlertStep != 4" class="btn btn-secondary arenella-btn" (click)="createListingAlertNextStep()">{{'arenella-listing-email-alert-btn-next' | translate}}</button>
					<button *ngIf="createAlertStep == 3" 						 class="btn btn-secondary arenella-btn" [disabled]="listingAlertConfirmDisabled" (click)="createListingAlert()">{{'arenella-listing-email-alert-btn-confirm' | translate}}</button>
				</div>
			
			</div>	
		</form>
	</div>
</dialog>