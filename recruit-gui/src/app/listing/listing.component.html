<div class=".container m-2" >
	<div>
	    <div class="centerdiv">
	        <div class="center-table">
	        	<div [ngSwitch]="activeView">
	        		
	        		<!-- List View -->
	        		<div  *ngSwitchCase="'list'">
	        		
		        		<div class="action-buttons" *ngIf="isAuthenticated() && !isAuthenticatedAsAdmin()">
							<button class="btn btn-secondary btn-listing" routerLink="/recruiter-listings">Manage Your Posts</button>
						</div>
	        		
	        			<div>
					
							<!-- Pagination -->
							<div class="pagination-options">
					           	<span [ngSwitch]="showNavPrev()">
									<span *ngSwitchCase="true"  class="listing-nav" (click)="previousPage()"><<<<<</span>
									<span *ngSwitchCase="false" class="listing-nav-disabled"><<<<<</span>
								</span>
								<span>{{currentPage+1}}</span>
								<span [ngSwitch]="showNavNext()">
									<span *ngSwitchCase="true"class="listing-nav" (click)="nextPage()">>>>>></span>
									<span *ngSwitchCase="false"class="listing-nav-disabled">>>>>></span>
								</span>
							</div>
						</div>
					
						<!-- Listings Table -->
						
						<div>
							
							<div>
								<ul class="contract-type-filter">
									<li><span class="{{getFilterTypeClass('CONTRACT_ROLE')}}" 	(click)="updateContractTypeFilter('Contract')"></span>Contract</li>
									<li><span class="{{getFilterTypeClass('PERM_ROLE')}}" 	 	(click)="updateContractTypeFilter('Perm')"></span>Perm</li>
									<li><span class="{{getFilterTypeClass('')}}" 		 		(click)="updateContractTypeFilter('')"></span>Both</li>
								</ul>
							</div>
							
							<div *ngFor="let listing of listings" class="listing">
							
								<table>
									<tr>
										<td class="listing-table-td">
										
											<a href="{{getExternalUrl(listing.listingId)}}" class="hide-url">
												<span  title="{{listing.listingId}}" *ngIf="listing.country === 'NETHERLANDS'"  	class="flag-icon flag-icon-nl suggestion-flag-country listing-country"></span>
												<span title="{{listing.listingId}}" *ngIf="listing.country === 'BELGIUM'"		class="flag-icon flag-icon-be suggestion-flag-country listing-country"></span>
												<span title="{{listing.listingId}}" *ngIf="listing.country === 'UK'"			class="flag-icon flag-icon-gb suggestion-flag-country listing-country"></span>
												<span title="{{listing.listingId}}" *ngIf="listing.country === 'IRELAND'"		class="flag-icon flag-icon-ie suggestion-flag-country listing-country"></span>
												<span title="{{listing.listingId}}" *ngIf="listing.country === 'EU_REMOTE'"		class="flag-icon flag-icon-eu suggestion-flag-country listing-country"></span>
												<span title="{{listing.listingId}}" *ngIf="listing.country === 'WORLD_REMOTE'"	class="flag-icon flag-icon-xx suggestion-flag-country listing-country"></span>	
											</a>
										</td>
										<td (click)="showListingDetails(listing)" class="listing-table-td listing-title">{{listing.title}}</td>
									</tr>
								</table>
								
							</div>
						
						</div>
						</div>
					
	        		<!-- Show Selected Listing View -->
	        		<div class="center">
	        			
	        			<div  *ngSwitchCase="'show'">
	        			
		        			<!-- Action buttons -->
							<div class="action-buttons">
								<button (click)="showList()" class="btn btn-secondary btn-listing">Back</button>
							</div>
							
							<div style="margin-top:20px;">
							
								<div class="listing-view-div">
									<h1 class="listing-view-title">{{selectedListing.title}}</h1></div>
								<div></div>
								<div class="listing-view-div">
									<span><b>{{getCountryCode(selectedListing.country)}}</b></span> : <span>{{selectedListing.location}}</span>
								</div>
								
								<div class="listing-view-div">
									<span><b>{{getContractType(selectedListing.type)}} | </b>{{selectedListing.currency}}</span> : <span>{{selectedListing.rate}}</span>
								</div>
								
								<div class="listing-view-div">
									<!--  <p>-->
									<pre style="white-space:pre-line;font-family: Roboto, 'Helvetica Neue', sans-serif;">{{selectedListing.description}}</pre>
									<!-- </p> -->
								</div>
								
								<h2 class="listing-view-title">Requirements</h2>
								
								<div class="listing-view-div"><b>Years Experience: </b>{{selectedListing.yearsExperience}}</div>	
								
								<h3  class="listing-view-title">Languages</h3>
								<div class="listing-view-div">
									<table>
										<tr *ngFor="let language of selectedListing.languages">
											<td>{{getLanguage(language)}}</td>
										</tr>
									</table>
								</div>
								
								<h3  class="listing-view-title">Skills</h3>
								<div class="listing-view-div">
									<table>
										<tr *ngFor="let skill of selectedListing.skills">
											<td>{{skill}}</td>
										</tr>
									</table>
								</div>
								
								<h2  class="listing-view-title">Contact Recruiter</h2>
								<div>
									<form [formGroup]="emailRequestFormBean">
										<textarea class="contact-recruiter-textarea" formControlName="message"></textarea>
										<div class="div-spacing">
											<p class="email-label">Curriculum</p>
											<input class="email-input" type="file" (change)="uploadCurriculumFile($event)"> 
											<div>.doc, .docx, .pdf - up to 1MB</div>
										</div>
										<div>
											<p class="email-label">Your Name:</p>
											<input class="email-input" type="email" formControlName="name">
										</div>
										<div>
											<p class="email-label">Your Email:</p>
											<input class="email-input" type="email" formControlName="email">
										</div>
										<div class="action-buttons">
											<button class="btn btn-secondary btn-listing btnRight" (click)="sendEmailRequest(feedbackBox)" *ngIf="enableSendEmail()">Send</button>
											<button class="btn btn-secondary btn-listing btnRight" disabled *ngIf="!enableSendEmail()">Send</button>
										</div>
									</form>
								</div>
							</div>
						</div>
	        		</div>
	        		
	        	</div>
	        </div>
	    </div>
	</div>
</div>

<!-- Feedback Box -->
<ng-template #feedbackBox let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Create Email Alert</h4>
 		<div class="filter-close-box" (click)="closeModal()">X</div>
	</div>
	<div class="feedbackBox;">
		<div class="modal-body" *ngIf="showSendAlertBoxSuccess">
			<p>The message has been sent to the recruiter managing this role. They will get back to you shortly.</p>
		</div>
		<div class="modal-body" *ngIf="showSendAlertBoxFailure">
			<p>Unfortunately it was not possible to send the Email at this time.</p>
		</div>
	</div>
</ng-template>